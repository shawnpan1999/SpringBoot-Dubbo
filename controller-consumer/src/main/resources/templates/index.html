<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>index</title>
    <link rel="stylesheet" href="/static/css/bootstrap.css">
    <link rel="stylesheet" href="/static/css/bs4.pop.css">
    <link rel="stylesheet" href="/static/css/App.css">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/popper.js"></script>
    <script src="/static/js/bootstrap.js"></script>
    <script src="/static/js/bs4.pop.js"></script>
    <script src="/static/js/App.js"></script>
</head>
<body>
当前用户：
<span th:if="${#strings.isEmpty(user)}">未登录</span>
<span th:if="${!#strings.isEmpty(user)}"><span th:text="${user.username}"></span></span>
<div class="container">
    <ul id="homeTab" class="nav nav-pills" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" data-toggle="pill" href="#products">商品</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="pill" href="#orders">订单</a>
        </li>
    </ul>
    <div id="homeTabContent" class="tab-content">
        <div class="container tab-pane active" id="products">
            <table class="table table-hover table-responsive">
                <thead>
                <tr>
                    <th>商品图片</th>
                    <th>商品名称</th>
                    <th>库存</th>
                    <th>销量</th>
                    <th>单价</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="product,indexInc:${products}" th:id="productLine+(${indexInc.index})">
                    <td th:text="${product.imageUrl}"></td>
                    <td th:text="${product.productName}"></td>
                    <td th:text="${product.stock}"></td>
                    <td th:text="${product.sales}"></td>
                    <td th:text="${product.price}"></td>
                    <td>
<!--                    TODO-->
                        <button type="button" class="btn btn-outline-success" data-toggle="modal" data-target="#containerCreateModal"
                                th:id="create+(${indexInc.index})" th:data-repo="${image.repository}" th:data-tag="${image.tag}"
                                onclick="modelFill(this.getAttribute('data-repo'), this.getAttribute('data-tag'))">购买</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="container tab-pane fade" id="orders">
            <button type="button" class="btn btn-primary" onclick="refreshContainers(Boolean(true))">刷新</button>
            <table class="table table-hover" id="containerTable">
                <thead>
                <tr>
                    <th>id</th>
                    <th>image</th>
                    <th>command</th>
                    <th>created</th>
                    <th>state</th>
                    <th>status</th>
                    <th>ports</th>
                    <th>names</th>
                    <th>options</th>
                </tr>
                </thead>
                <tbody id="containerTableBody">
                <tr th:each="container,indexInc:${containers}" th:id="containerLine+(${indexInc.index})">
                    <td><div th:text="${container.id}"></div></td>
                    <td><div class="longContent" th:text="${container.image}"></div></td>
                    <td><div class="longContent" th:text="${container.command}"></div></td>
                    <td><div class="longContent" th:text="${container.created}"></div></td>
                    <td><div th:text="${container.state}"></div></td>
                    <td><div class="longContent" th:text="${container.status}"></div></td>
                    <td><div th:text="${container.ports}"></div></td>
                    <td><div class="longContent" th:text="${container.names}"></div></td>
                    <td th:id="buttonset+(${indexInc.index})" th:switch="${container.state}">
                        <div th:case="created">
                            <button type="button" class="btn btn-outline-success btn-sm" th:id="start+(${indexInc.index})" th:data-cid="${container.realId}" th:data-bid="${indexInc.index}"
                                    onclick="containerStart(this.getAttribute('data-cid'),this.getAttribute('data-bid'))">启动</button>
                            <button type="button" class="btn btn-outline-danger btn-sm" th:id="delete+(${indexInc.index})" th:data-cid="${container.realId}" th:data-bid="${indexInc.index}"
                                    onclick="containerDelete(this.getAttribute('data-cid'),this.getAttribute('data-bid'))">删除</button>
                        </div>
                        <div th:case="running">
                            <button type="button" class="btn btn-outline-info btn-sm" th:id="restart+(${indexInc.index})" th:data-cid="${container.realId}" th:data-bid="${indexInc.index}"
                                    onclick="containerRestart(this.getAttribute('data-cid'),this.getAttribute('data-bid'))">重启</button>
                            <button type="button" class="btn btn-outline-warning btn-sm" th:id="stop+(${indexInc.index})" th:data-cid="${container.realId}" th:data-bid="${indexInc.index}"
                                    onclick="containerStop(this.getAttribute('data-cid'),this.getAttribute('data-bid'))">停止</button>
                            <button type="button" class="btn btn-outline-danger btn-sm" th:id="delete+(${indexInc.index})" th:data-cid="${container.realId}" th:data-bid="${indexInc.index}"
                                    onclick="containerDelete(this.getAttribute('data-cid'),this.getAttribute('data-bid'))">删除</button>
                        </div>
                        <div th:case="exited">
                            <button type="button" class="btn btn-outline-info btn-sm" th:id="restart+(${indexInc.index})" th:data-cid="${container.realId}" th:data-bid="${indexInc.index}"
                                    onclick="containerRestart(this.getAttribute('data-cid'),this.getAttribute('data-bid'))">重启</button>
                            <button type="button" class="btn btn-outline-warning btn-sm" th:id="stop+(${indexInc.index})" th:data-cid="${container.realId}" th:data-bid="${indexInc.index}" disabled="disabled"
                                    onclick="containerStop(this.getAttribute('data-cid'),this.getAttribute('data-bid'))">停止</button>
                            <button type="button" class="btn btn-outline-danger btn-sm" th:id="delete+(${indexInc.index})" th:data-cid="${container.realId}" th:data-bid="${indexInc.index}"
                                    onclick="containerDelete(this.getAttribute('data-cid'),this.getAttribute('data-bid'))">删除</button>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>


</body>

</html>